«<!DOCTYPE html>»
<html>  
<body>  
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script> 

<h1><%=buba%></h1>
<form method = "post" id = "sendData">
    <input type="text" id="fname" value="" ><br><br>
    <input type="submit" value="Submit" >
  </form> 
  <table border="1" class="table table-striped table-bordered" id="sData">
    <thead>
        <tr>
            <th>Nr introdus</th>
            <th>Nr random</th>
            <th>Suma</th>
            <th>Id</th>
            <th>edit</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
  <script>
    
    $(document).ready(function(){
      load_data();
      $("#sendData").submit(function(e) {
        e.preventDefault();
        var inputNr = document.getElementById('fname').value;
        add_data(inputNr);
        load_data();
    });
    
    
    function add_data(number)
    {
      $.post('http://localhost:3000/main', { action: 'add' , newData: number}, function(data) {
        console.log(data);
      });
    }
    function load_data()
    {
      $.post('http://localhost:3000/main', { action: 'fetch' }, function(data) {
        var html = '';

                if(data.length > 0)
                {
                    for(var count = 0; count < data.length; count++)
                    {
                      var url = '<a href="http://localhost:3000/edit?inputNumber='+data[count].input+'&uid='+ data[count].id +'">edit</a>';  
                      html += `
                        <tr>
                            <td>`+data[count].input+`</td>
                            <td>`+data[count].random+`</td>
                            <td>`+data[count].sumaNr+`</td>
                            <td>`+data[count].id+`</td>
                            <td>`+url+`</td>
                            <td></td>
                        </tr>
                        `;
                    }
                }

                $('#sData tbody').html(html);
      });
      
    }

    });

    
  </script>
  <p id = "p1" style="border-width:3px; border-style:solid; border-color:#FF0000; padding: 1em;">void</p>
</body>
</html>
